<div class="container">
  <app-nav [user]="user"></app-nav>
</div>
<div class="container">
  <div class="page-header">
    <h1 *ngIf="!user.auth"> Welcome - Please Login....</h1>
  </div>
</div>

<br>

<div class="container" *ngIf="user.auth">

  <div *ngIf="appState!=='add'">
    <button class="btn btn-primary" (click)="changeState('add')"> Add Business </button>
  </div>
  <div *ngIf="appState==='add'">
    <app-new-business [newBusiness]="newBusiness" [categories]="categories" (newBusinessRequest)="onBusinessCreated($event)"></app-new-business>
    <br>
  </div>

  <div class="row">
    <div class="col"></div>
    <div class="col">
      <label> Filter Category </label>
      <select class="custom-select" (change)="filterCategory(filteredCategory.value)" #filteredCategory>
        <option ></option>
        <option *ngFor="let category of categories" value="{{category.name}}">{{category.name}}</option>
      </select>
    </div>
  </div>
  <br>
  <div class="card" *ngIf="appState==='extend'">
    <app-show-business [business]="selectedBusiness" (hide)="changeState('default')"></app-show-business>
  </div>
  <app-list-business  [businesses]="businesses"  [categories]="categories"
                      (showDetail)="changeState('extend',$event)" (edit)="onEditBusiness($event)" (delete)="onDeleteBusiness($event)"
                      ></app-list-business>
</div>